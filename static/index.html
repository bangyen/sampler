<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantized LLM Comparison Demo</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="backdrop"></div>
    
    <div class="container">
        <aside class="sidebar">
            <button class="close-sidebar" aria-label="Close sidebar">×</button>
            
            <div id="chat-sidebar" class="sidebar-content" data-sidebar="chat">
                <div class="sidebar-header">
                    <h2>LLM Model Selection</h2>
                </div>
                
                <div id="model-list" class="model-list">
                    <div class="skeleton-model">
                        <div class="skeleton skeleton-title"></div>
                        <div class="skeleton skeleton-specs"></div>
                        <div class="skeleton skeleton-description"></div>
                    </div>
                    <div class="skeleton-model">
                        <div class="skeleton skeleton-title"></div>
                        <div class="skeleton skeleton-specs"></div>
                        <div class="skeleton skeleton-description"></div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <h3>Recent Classifications</h3>
                    <button id="new-classification-btn" class="btn btn-primary">New Classification</button>
                    <button id="clear-all-classifications-btn" class="btn btn-secondary" style="margin-top: 10px;">Clear All History</button>
                    <div id="classification-list" class="conversation-list">
                        <div class="skeleton-conversation">
                            <div class="skeleton skeleton-conversation-title"></div>
                            <div class="skeleton skeleton-conversation-meta"></div>
                        </div>
                        <div class="skeleton-conversation">
                            <div class="skeleton skeleton-conversation-title"></div>
                            <div class="skeleton skeleton-conversation-meta"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="ner-sidebar" class="sidebar-content" data-sidebar="ner" style="display: none;">
                <div class="sidebar-header">
                    <h2>NER Model Selection</h2>
                </div>
                
                <div id="ner-model-list" class="model-list">
                    <div class="skeleton-model">
                        <div class="skeleton skeleton-title"></div>
                        <div class="skeleton skeleton-specs"></div>
                        <div class="skeleton skeleton-description"></div>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3>Recent Analyses</h3>
                    <button id="clear-all-ner-btn" class="btn btn-secondary" style="margin-bottom: 10px;">Clear All History</button>
                    <div id="ner-history-list" class="conversation-list">
                        <div class="skeleton-conversation">
                            <div class="skeleton skeleton-conversation-title"></div>
                            <div class="skeleton skeleton-conversation-meta"></div>
                        </div>
                        <div class="skeleton-conversation">
                            <div class="skeleton skeleton-conversation-title"></div>
                            <div class="skeleton skeleton-conversation-meta"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="ocr-sidebar" class="sidebar-content" data-sidebar="ocr" style="display: none;">
                <div class="sidebar-header">
                    <h2>OCR Model Selection</h2>
                </div>
                
                <div id="ocr-model-list" class="model-list">
                    <div class="skeleton-model">
                        <div class="skeleton skeleton-title"></div>
                        <div class="skeleton skeleton-description"></div>
                    </div>
                    <div class="skeleton-model">
                        <div class="skeleton skeleton-title"></div>
                        <div class="skeleton skeleton-description"></div>
                    </div>
                    <div class="skeleton-model">
                        <div class="skeleton skeleton-title"></div>
                        <div class="skeleton skeleton-description"></div>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3>Recent Extractions</h3>
                    <button id="clear-all-ocr-btn" class="btn btn-secondary" style="margin-bottom: 10px;">Clear All History</button>
                    <div id="ocr-history-list" class="conversation-list">
                        <div class="skeleton-conversation">
                            <div class="skeleton skeleton-conversation-title"></div>
                            <div class="skeleton skeleton-conversation-meta"></div>
                        </div>
                        <div class="skeleton-conversation">
                            <div class="skeleton skeleton-conversation-title"></div>
                            <div class="skeleton skeleton-conversation-meta"></div>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <main class="main-content">
            <div class="header">
                <button class="hamburger-menu" aria-label="Open menu" aria-expanded="false">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <div class="header-content">
                    <h1><span class="full-title">Quantized LLM Comparison</span><span class="short-title">LLM Comparison</span></h1>
                    <p>Compare different quantized and efficient LLM models to see how they perform.</p>
                </div>
            </div>

            <div class="tabs">
                <button class="tab-btn active" data-tab="chat">LLM</button>
                <button class="tab-btn" data-tab="ner">NER</button>
                <button class="tab-btn" data-tab="ocr">OCR</button>
            </div>

            <div class="content-wrapper">
                <div id="chat-tab" class="tab-content active">
                <div class="classification-container">
                    <div class="classification-header">
                        <h2>Zero-Shot Classification</h2>
                        <p>Classify text into custom categories using LLMs with confidence scoring</p>
                    </div>
                    
                    <div class="example-prompts" style="margin-bottom: 20px;">
                        <div class="info-message" id="classification-example-info">Try one of these example texts for sentiment analysis:</div>
                        <div class="example-grid" id="classification-example-grid">
                            <button class="example-prompt" data-classification-text="This product exceeded all my expectations! The quality is outstanding and delivery was incredibly fast.">Positive review</button>
                            <button class="example-prompt" data-classification-text="I'm very disappointed with this purchase. The item arrived damaged and customer service was unhelpful.">Negative review</button>
                            <button class="example-prompt" data-classification-text="The product works as described. Nothing particularly special, but it gets the job done.">Neutral review</button>
                            <button class="example-prompt" data-classification-text="I have mixed feelings about this. Some features are great, but others need improvement.">Mixed sentiment</button>
                        </div>
                    </div>
                    
                    <div class="classification-input-section">
                        <label for="classification-text-input">Text to Classify:</label>
                        <textarea id="classification-text-input" placeholder="Enter the text you want to classify..." rows="4"></textarea>
                    </div>
                    
                    <div class="label-management-section">
                        <div class="label-section-header">
                            <label>Candidate Labels:</label>
                            <div class="label-presets">
                                <button class="preset-btn" data-preset="sentiment">Sentiment</button>
                                <button class="preset-btn" data-preset="intent">Intent</button>
                                <button class="preset-btn" data-preset="urgency">Urgency</button>
                                <button class="preset-btn" data-preset="cargo">Cargo Type</button>
                            </div>
                        </div>
                        
                        <div class="label-chips-container" id="label-chips-container">
                            <div class="label-chip">
                                <span>positive</span>
                                <button class="remove-label" data-label="positive">&times;</button>
                            </div>
                            <div class="label-chip">
                                <span>negative</span>
                                <button class="remove-label" data-label="negative">&times;</button>
                            </div>
                            <div class="label-chip">
                                <span>neutral</span>
                                <button class="remove-label" data-label="neutral">&times;</button>
                            </div>
                        </div>
                        
                        <div class="add-label-section">
                            <input type="text" id="new-label-input" placeholder="Add custom label..." />
                            <button id="add-label-btn" class="btn btn-secondary">Add Label</button>
                        </div>
                    </div>
                    
                    <div class="classification-actions">
                        <button id="classify-btn" class="btn btn-primary">Classify</button>
                        <button id="stop-classification-btn" class="btn btn-danger" style="display: none;">Stop</button>
                    </div>
                    
                    <div id="classification-results" class="classification-results" style="display: none;">
                        <h3>Classification Results</h3>
                        <div id="abstain-indicator" class="abstain-indicator" style="display: none;">
                            <strong>⚠ Low Confidence Warning</strong>
                            <p>The model suggests abstaining from this classification. Top confidence is below the threshold.</p>
                        </div>
                        <div id="top-prediction" class="top-prediction"></div>
                        <div id="all-predictions" class="all-predictions"></div>
                        <div id="classification-metrics" class="metrics-display"></div>
                    </div>
                </div>

                <div class="settings-panel">
                    <h2>Classification Settings</h2>
                    
                    <div class="setting-group">
                        <label for="abstain-threshold-slider">
                            Abstain Threshold: <span id="abstain-threshold-value">0.5</span>
                        </label>
                        <input type="range" id="abstain-threshold-slider" min="0" max="1" step="0.05" value="0.5" />
                        <small>Minimum confidence required to accept classification</small>
                    </div>

                    <div class="setting-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="use-logprobs-checkbox" checked />
                            <span>Use Logprob Scoring</span>
                        </label>
                        <small>Compute sequence probabilities for confidence calibration (slower but more accurate)</small>
                    </div>

                    <details class="advanced-settings">
                        <summary>Advanced Settings</summary>
                        
                        <div class="setting-group">
                            <label for="hypothesis-template-input">
                                Hypothesis Template:
                            </label>
                            <input type="text" id="hypothesis-template-input" value="This text is about {label}." />
                            <small>Template for generating hypotheses. Use {label} as placeholder.</small>
                        </div>
                    </details>
                </div>
                </div>

                <div id="ner-tab" class="tab-content">
                    <div class="ner-container">
                        <div class="ner-header">
                            <h2>Named Entity Recognition</h2>
                            <p>Extract entities like people, organizations, and locations from text</p>
                        </div>
                        
                        <div class="example-prompts" style="margin-bottom: 20px;">
                            <div class="info-message">Try one of these example texts:</div>
                            <div class="example-grid">
                                <button class="example-prompt" data-ner-text="Maersk Line announced the arrival of the MSC Gulsun at the Port of Rotterdam on Tuesday, carrying 19,000 containers from Shanghai.">Container ship arrival</button>
                                <button class="example-prompt" data-ner-text="The Ever Given, operated by Evergreen Marine, blocked the Suez Canal for six days in March 2021, disrupting global trade routes between Asia and Europe.">Canal blockage incident</button>
                                <button class="example-prompt" data-ner-text="Mediterranean Shipping Company (MSC) and CMA CGM jointly announced new weekly service connecting Singapore, Port Said, and Hamburg starting January 2024.">New shipping route</button>
                                <button class="example-prompt" data-ner-text="Port of Los Angeles reported record cargo volume in November, with APM Terminals and Yang Ming Marine Transport handling over 2.5 million TEUs.">Port activity report</button>
                            </div>
                        </div>
                        
                        <div class="ner-input-section">
                            <label for="ner-text-input">Input Text:</label>
                            <textarea id="ner-text-input" placeholder="Enter or paste text here to extract entities..." rows="8"></textarea>
                            <button id="ner-submit-btn" class="btn btn-primary">Extract Entities</button>
                        </div>
                        
                        <div id="ner-results" class="ner-results" style="display: none;">
                            <h3>Detected Entities</h3>
                            <div id="ner-entities" class="entity-list"></div>
                            <div id="ner-metrics" class="metrics-display"></div>
                        </div>
                    </div>
                </div>

                <div id="ocr-tab" class="tab-content">
                    <div class="ocr-container">
                        <div class="ocr-header">
                            <h2>Optical Character Recognition</h2>
                            <p>Extract text from images using EasyOCR or Tesseract</p>
                        </div>
                        
                        <div class="example-prompts" style="margin-bottom: 20px;">
                            <div class="info-message">Try one of these example images:</div>
                            <div class="example-grid">
                                <button class="example-prompt" data-ocr-image="/static/sample_images/Bill_of_Lading_shipping_document_ef82f159.png">Bill of Lading</button>
                                <button class="example-prompt" data-ocr-image="/static/sample_images/Container_cargo_manifest_033c63f0.png">Cargo Manifest</button>
                                <button class="example-prompt" data-ocr-image="/static/sample_images/Container_inspection_form_5799e54a.png">Inspection Form</button>
                                <button class="example-prompt" data-ocr-image="/static/sample_images/Maritime_shipping_invoice_c67cc105.png">Shipping Invoice</button>
                            </div>
                        </div>
                        
                        <div class="ocr-upload-section">
                            <div id="ocr-drop-zone" class="drop-zone">
                                <p>Drag and drop an image here, or click to select</p>
                                <input type="file" id="ocr-file-input" accept="image/*" style="display: none;">
                            </div>
                            
                            <div id="ocr-preview" class="ocr-preview" style="display: none;">
                                <h3>Image Preview</h3>
                                <img id="ocr-preview-img" alt="Preview">
                                <div class="ocr-preview-actions">
                                    <button id="ocr-submit-btn" class="btn btn-primary">Extract Text</button>
                                    <button id="ocr-clear-btn" class="btn btn-secondary">Choose Different Image</button>
                                </div>
                            </div>
                        </div>
                        
                        <div id="ocr-results" class="ocr-results" style="display: none;">
                            <h3>Extracted Text</h3>
                            <div id="ocr-text" class="extracted-text"></div>
                            <div id="ocr-metrics" class="metrics-display"></div>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <div id="toast-container" class="toast-container"></div>

    <script src="/static/app.js"></script>
</body>
</html>
