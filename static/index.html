<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Model Comparison Demo</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="backdrop"></div>
    
    <div class="container">
        <aside class="sidebar">
            <button class="close-sidebar" aria-label="Close sidebar"></button>
            
            <div id="classification-sidebar" class="sidebar-content" data-sidebar="classification">
                <div class="sidebar-header">
                    <h2>Model Selection</h2>
                </div>
                
                <div id="model-list" class="model-list">
                    <div class="skeleton-model">
                        <div class="skeleton skeleton-title"></div>
                        <div class="skeleton skeleton-specs"></div>
                        <div class="skeleton skeleton-description"></div>
                    </div>
                    <div class="skeleton-model">
                        <div class="skeleton skeleton-title"></div>
                        <div class="skeleton skeleton-specs"></div>
                        <div class="skeleton skeleton-description"></div>
                    </div>
                    <div class="skeleton-model">
                        <div class="skeleton skeleton-title"></div>
                        <div class="skeleton skeleton-specs"></div>
                        <div class="skeleton skeleton-description"></div>
                    </div>
                </div>

                <details class="sidebar-section settings-accordion">
                    <summary>
                        <h3>Classification Settings</h3>
                    </summary>
                    <div class="settings-content">
                        <div class="setting-group">
                            <label for="abstain-threshold-slider">
                                Abstain Threshold: <span id="abstain-threshold-value">0.5</span>
                            </label>
                            <input type="range" id="abstain-threshold-slider" min="0" max="1" step="0.05" value="0.5" />
                            <small>Minimum confidence required to accept classification</small>
                        </div>

                        <div class="setting-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="use-logprobs-checkbox" />
                                <span>Use Logprob Scoring</span>
                            </label>
                            <small>Compute sequence probabilities for confidence calibration (slower, provides detailed probability scores)</small>
                        </div>

                        <div class="setting-group">
                            <label for="hypothesis-template-input">
                                Hypothesis Template:
                            </label>
                            <input type="text" id="hypothesis-template-input" value="The sentiment of this text is {label}." />
                            <small>Template for generating hypotheses. Use {label} as placeholder. Auto-updates when you select a preset.</small>
                        </div>
                    </div>
                </details>
            </div>

            <div id="ner-sidebar" class="sidebar-content hidden" data-sidebar="ner">
                <div class="sidebar-header">
                    <h2>NER Model Selection</h2>
                </div>
                
                <div id="ner-model-list" class="model-list">
                    <div class="skeleton-model">
                        <div class="skeleton skeleton-title"></div>
                        <div class="skeleton skeleton-specs"></div>
                        <div class="skeleton skeleton-description"></div>
                    </div>
                </div>
                
                <details class="sidebar-section settings-accordion">
                    <summary>
                        <h3>NER Settings</h3>
                    </summary>
                    <div class="settings-content">
                        <div class="setting-group">
                            <label for="ner-confidence-threshold">
                                Confidence Threshold:
                                <span class="setting-value" id="ner-confidence-value">0.50</span>
                            </label>
                            <input type="range" id="ner-confidence-threshold" min="0" max="1" step="0.05" value="0.50">
                            <small>Filter entities below this confidence score</small>
                        </div>
                        
                        <div class="setting-group">
                            <label>Entity Types</label>
                            <div class="entity-type-filters">
                                <label class="checkbox-label">
                                    <input type="checkbox" class="entity-type-checkbox" value="PER" checked>
                                    <span>Person</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" class="entity-type-checkbox" value="ORG" checked>
                                    <span>Organization</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" class="entity-type-checkbox" value="LOC" checked>
                                    <span>Location</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" class="entity-type-checkbox" value="MISC" checked>
                                    <span>Miscellaneous</span>
                                </label>
                            </div>
                            <small>Select which entity types to display</small>
                        </div>
                    </div>
                </details>
            </div>

            <div id="ocr-sidebar" class="sidebar-content hidden" data-sidebar="ocr">
                <div class="sidebar-header">
                    <h2>OCR Model Selection</h2>
                </div>
                
                <div id="ocr-model-list" class="model-list">
                    <div class="skeleton-model">
                        <div class="skeleton skeleton-title"></div>
                        <div class="skeleton skeleton-description"></div>
                    </div>
                    <div class="skeleton-model">
                        <div class="skeleton skeleton-title"></div>
                        <div class="skeleton skeleton-description"></div>
                    </div>
                    <div class="skeleton-model">
                        <div class="skeleton skeleton-title"></div>
                        <div class="skeleton skeleton-description"></div>
                    </div>
                </div>
                
                <details class="sidebar-section settings-accordion">
                    <summary>
                        <h3>OCR Settings</h3>
                    </summary>
                    <div class="settings-content">
                        <div class="setting-group">
                            <label for="ocr-confidence-threshold">
                                Confidence Threshold:
                                <span class="setting-value" id="ocr-confidence-value">0.50</span>
                            </label>
                            <input type="range" id="ocr-confidence-threshold" min="0" max="1" step="0.05" value="0.50">
                            <small>Filter text detections below this confidence score</small>
                        </div>
                        
                        <div class="setting-group">
                            <label for="ocr-min-text-size">
                                Min Text Size (pixels):
                                <span class="setting-value" id="ocr-min-text-size-value">10</span>
                            </label>
                            <input type="range" id="ocr-min-text-size" min="5" max="50" step="5" value="10">
                            <small>Filter out text smaller than this height</small>
                        </div>
                    </div>
                </details>
            </div>
        </aside>

        <main class="main-content">
            <div class="header">
                <button class="hamburger-menu" aria-label="Open menu" aria-expanded="false">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <div class="header-content">
                    <h1><span class="full-title">Model Comparison</span><span class="short-title">Model Comparison</span></h1>
                    <p>Compare different models for zero-shot classification, entity recognition, and text extraction.</p>
                </div>
            </div>

            <div class="tabs">
                <button class="tab-btn active" data-tab="classification">Zero-Shot</button>
                <button class="tab-btn" data-tab="ner">NER</button>
                <button class="tab-btn" data-tab="ocr">OCR</button>
            </div>

            <div class="content-wrapper">
                <div id="classification-tab" class="tab-content active">
                <div class="classification-container">
                    <div class="classification-header">
                        <h2>Zero-Shot Classification</h2>
                        <p>Classify text into custom categories using zero-shot classification with confidence scoring</p>
                    </div>
                    
                    <div class="example-prompts mb-lg">
                        <div class="info-message" id="classification-example-info">
                            <div class="skeleton skeleton-info-text"></div>
                        </div>
                        <div class="example-grid" id="classification-example-grid">
                            <div class="skeleton skeleton-example-btn"></div>
                            <div class="skeleton skeleton-example-btn"></div>
                            <div class="skeleton skeleton-example-btn"></div>
                            <div class="skeleton skeleton-example-btn"></div>
                        </div>
                    </div>
                    
                    <div class="classification-input-section">
                        <label for="classification-text-input">Input Text:</label>
                        <textarea id="classification-text-input" placeholder="Enter the text you want to classify..." rows="8"></textarea>
                    </div>
                    
                    <div class="label-management-section">
                        <div class="label-section-header">
                            <label>Candidate Labels:</label>
                            <div class="label-presets">
                                <button class="btn btn-secondary preset-btn" data-preset="sentiment">Sentiment</button>
                                <button class="btn btn-secondary preset-btn" data-preset="intent">Intent</button>
                                <button class="btn btn-secondary preset-btn" data-preset="urgency">Urgency</button>
                                <button class="btn btn-secondary preset-btn" data-preset="cargo">Cargo Type</button>
                                <details class="label-customization-accordion">
                                    <summary class="btn btn-secondary">Customize</summary>
                                </details>
                            </div>
                        </div>
                        
                        <div class="label-customization-content hidden" id="label-customization-content">
                            <div class="label-chips-container" id="label-chips-container">
                                <div class="add-label-section">
                                    <input type="text" id="new-label-input" placeholder="Add custom label..." />
                                    <button id="add-label-btn" class="btn btn-secondary">Add Label</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="model-status-section">
                        <div class="model-status-info">
                            <span class="model-status-label">Selected Model:</span>
                            <span id="selected-model-display" class="model-status-name"></span>
                        </div>
                        <div class="classification-actions">
                            <button id="main-load-model-btn" class="btn btn-secondary">Preload Model</button>
                            <button id="classify-btn" class="btn btn-primary">Classify Text</button>
                        </div>
                    </div>
                    
                    <div id="classification-results" class="classification-results hidden">
                        <h3>Classification Results</h3>
                        <div id="abstain-indicator" class="abstain-indicator hidden">
                            <strong>Low Confidence Warning</strong>
                            <p>The model suggests abstaining from this classification. Top confidence is below the threshold.</p>
                        </div>
                        <div id="top-prediction" class="top-prediction"></div>
                        <div id="all-predictions" class="all-predictions"></div>
                        <div id="classification-metrics" class="metrics-display"></div>
                    </div>
                </div>
                </div>

                <div id="ner-tab" class="tab-content">
                    <div class="ner-container">
                        <div class="ner-header">
                            <h2>Named Entity Recognition</h2>
                            <p>Extract entities like people, organizations, and locations from text</p>
                        </div>
                        
                        <div class="example-prompts mb-lg">
                            <div class="info-message">Try one of these example texts:</div>
                            <div class="example-grid">
                                <button class="btn btn-secondary example-prompt" data-ner-text="Maersk Line announced the arrival of the MSC Gulsun at the Port of Rotterdam on Tuesday, carrying 19,000 containers from Shanghai.">Container ship arrival</button>
                                <button class="btn btn-secondary example-prompt" data-ner-text="The Ever Given, operated by Evergreen Marine, blocked the Suez Canal for six days in March 2021, disrupting global trade routes between Asia and Europe.">Canal blockage incident</button>
                                <button class="btn btn-secondary example-prompt" data-ner-text="Mediterranean Shipping Company (MSC) and CMA CGM jointly announced new weekly service connecting Singapore, Port Said, and Hamburg starting January 2024.">New shipping route</button>
                                <button class="btn btn-secondary example-prompt" data-ner-text="Port of Los Angeles reported record cargo volume in November, with APM Terminals and Yang Ming Marine Transport handling over 2.5 million TEUs.">Port activity report</button>
                            </div>
                        </div>
                        
                        <div class="ner-input-section">
                            <label for="ner-text-input">Input Text:</label>
                            <textarea id="ner-text-input" placeholder="Enter or paste text here to extract entities..." rows="8"></textarea>
                        </div>
                        
                        <div class="model-status-section">
                            <div class="model-status-info">
                                <span class="model-status-label">Selected Model:</span>
                                <span id="selected-ner-model-display" class="model-status-name"></span>
                            </div>
                            <div class="ner-actions">
                                <button id="ner-load-model-btn" class="btn btn-secondary">Preload Model</button>
                                <button id="ner-submit-btn" class="btn btn-primary">Extract Entities</button>
                            </div>
                        </div>
                        
                        <div id="ner-results" class="ner-results hidden">
                            <h3>Detected Entities</h3>
                            <div id="ner-entities" class="entity-list"></div>
                            <div id="ner-metrics" class="metrics-display"></div>
                        </div>
                    </div>
                </div>

                <div id="ocr-tab" class="tab-content">
                    <div class="ocr-container">
                        <div class="ocr-header">
                            <h2>Optical Character Recognition</h2>
                            <p>Extract text from images using EasyOCR or Tesseract</p>
                        </div>
                        
                        <div class="example-prompts mb-lg">
                            <div class="info-message">Try one of these example images:</div>
                            <div class="example-grid">
                                <button class="btn btn-secondary example-prompt" data-ocr-image="/static/sample_images/Bill_of_Lading_shipping_document_ef82f159.png">Bill of Lading</button>
                                <button class="btn btn-secondary example-prompt" data-ocr-image="/static/sample_images/Container_cargo_manifest_033c63f0.png">Cargo Manifest</button>
                                <button class="btn btn-secondary example-prompt" data-ocr-image="/static/sample_images/Container_inspection_form_5799e54a.png">Inspection Form</button>
                                <button class="btn btn-secondary example-prompt" data-ocr-image="/static/sample_images/Maritime_shipping_invoice_c67cc105.png">Shipping Invoice</button>
                            </div>
                        </div>
                        
                        <div class="ocr-upload-section">
                            <div id="ocr-drop-zone" class="drop-zone">
                                <div id="ocr-upload-prompt">
                                    <p>Drag and drop an image here, or click to select</p>
                                </div>
                                <div id="ocr-preview" class="ocr-preview hidden">
                                    <img id="ocr-preview-img" alt="Preview">
                                </div>
                                <input type="file" id="ocr-file-input" accept="image/*" class="hidden">
                            </div>
                        </div>
                        
                        <div class="model-status-section">
                            <div class="model-status-info">
                                <span class="model-status-label">Selected Model:</span>
                                <span id="selected-ocr-model-display" class="model-status-name"></span>
                            </div>
                            <div class="ocr-actions">
                                <button id="ocr-load-model-btn" class="btn btn-secondary">Preload Model</button>
                                <button id="ocr-submit-btn" class="btn btn-primary" disabled>Extract Text</button>
                            </div>
                        </div>
                        
                        <div id="ocr-results" class="ocr-results hidden">
                            <h3>Extracted Text</h3>
                            <div id="ocr-text" class="extracted-text"></div>
                            <div id="ocr-metrics" class="metrics-display"></div>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <div id="toast-container" class="toast-container"></div>

    <script src="/static/app.js"></script>
</body>
</html>
